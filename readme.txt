ニュース検索.alfredworkflowのメモ

機能：
　googleニュース検索のRSSを表示させる

インストール：
　1.alfredworkflowをダウンロード
　2.ファイルをダブルクリックしてワークフローに登録

使い方：
　alfredから"ニュース"＋検索ワードを入力するとRSSの候補出力されるので、続けて選択
　

開発メモ：

基本Lesson7からの使い回しです

1.％エンコードしてURLを生成する
　早速、Googleニュース検索のRSSを試してみたら日本語の検索がうまくないようでした。
　試しにUTF-8で％エンコードしたら問題なく取得できました
　価格.comキーワード検索で実装したnkfを利用しました
　あとはURLの文字列に結合するだけです


2.RSSを取得する
　Lesson7と同様にcURLでRSSを取得します
　今回は、一旦RSSを変数で受けるようにしてみました
　特に問題なく、後続のタグ抽出ができました
　Lesson7はなにが悪かったのかな、まあいいか


3.RSSからタグの内容を取得する
　こちらもLesson7と同様にsedとgrepでタグの中身をとりだしています
　違っている点は、取り出し元が変数になっていることです
　ただ、実装したらdescriptionがうまくとりだせません
　結局、タイトルが、『記事のタイトル ー ニュース発信元』という構成だったので
　前後で分割してAlfredのタイトルとサブタイトルにセットしました
　下記の部分で取り出したtitleタグの中身を『-』で分割しています

　arry=(${title[i]//-/ })


4.JSON出力フォーマットのXMLを作成する
　こちらもLesson7と同様です
　上記の分離を受けてtitleに記事のタイトルをsubtitleにニュース発信元をセットしています


背景：
 Lesson7のRSSツールを改造してRSSを検索できるようにしました
 googleニュースが検索用のRSSを発見して作ってみました


　


